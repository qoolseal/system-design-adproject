**–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –ø–æ —É—Ä–æ–≤–Ω—è–º:**
#### 1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- –ó–∞–≥—Ä—É–∑–∫–∞ CPU/Memory/IO
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–æ–≤ –≤ k8s (–ø–æ –∫–∞–∂–¥–æ–º—É —Å–µ—Ä–≤–∏—Å—É)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤ –ø–æ–¥–æ–≤
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å PostgreSQL, Redis, Kafka (—á–µ—Ä–µ–∑ blackbox-exporter)
#### 2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- RPS (Requests per second) –ø–æ –∫–∞–∂–¥–æ–º—É API endpoint'—É
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API (p50/p95/p99)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (5xx, 4xx, timeouts)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Kafka (lag per consumer group)
- Hit/miss Redis –∫—ç—à–∞
- –ì–ª—É–±–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–µ–π Kafka
- –°–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ Outbox
#### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ PostgreSQL
- Deadlocks
- –õ–∞–≥ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É –º–∞—Å—Ç–µ—Ä–æ–º –∏ —Ä–µ–ø–ª–∏–∫–æ–π
###  –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

- **Prometheus** ‚Äî —Å–±–æ—Ä –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ —Å–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —ç–∫—Å–ø–æ—Ä—Ç—ë—Ä–æ–≤.
- **Grafana** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ (–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, Kafka, Redis, PostgreSQL).
- **Alertmanager** ‚Äî –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º (–ø–∞–¥–µ–Ω–∏—è, –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏, –æ—à–∏–±–∫–∏).
- **Loki** / **ELK (Elasticsearch, Logstash, Kibana)** ‚Äî –¥–ª—è –ª–æ–≥–æ–≤ –∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
- **Jaeger** ‚Äî –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏.
- **Blackbox exporter** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–ø–ª–∞—Ç—ë–∂–∫–∏, API –¥–æ—Å—Ç–∞–≤–∫–∏).
- **Kafka Exporter** ‚Äî —Å—Ç–∞—Ç—É—Å –±—Ä–æ–∫–µ—Ä–æ–≤, –ª–∞–≥–∏ –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤, offset drift.
### –®–∞–±–ª–æ–Ω –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç      | –ú–µ—Ç—Ä–∏–∫–∞                 | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ / –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è                     |
| -------------- | ----------------------- | ---------------- | -------------------- | ---------------------------------------------- |
| API Gateway    | RPS                     | > 1000           | Prometheus + Grafana | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É            |
| API Gateway    | p95 latency             | < 300ms          | Prometheus           | –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ 95% –∑–∞–ø—Ä–æ—Å–æ–≤                   |
| Redis          | Cache hit ratio         | > 85%            | Redis Exporter       | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫—ç—à–∞ (–Ω–∏–∑–∫–∏–π ‚Äî –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –ë–î)    |
| PostgreSQL     | Average query time      | < 100ms          | Postgres Exporter    | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è SQL-–∑–∞–ø—Ä–æ—Å–∞                      |
| PostgreSQL     | Replication lag         | < 1s             | Postgres Exporter    | –ó–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏, –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å |
| Kafka          | Consumer group lag      | < 1000           | Kafka Exporter       | –û—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π                        |
| Kafka          | Broker availability     | 100%             | Kafka Exporter       | –ó–¥–æ—Ä–æ–≤—å–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ Kafka                        |
| Order Service  | Error rate (5xx)        | < 1%             | Prometheus           | –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å API                                 |
| Search Service | Fulltext query duration | < 500ms          | Prometheus / APM     | –ë—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–∏—Å–∫–∞                          |
### –°—Ü–µ–Ω–∞—Ä–∏–π –∞–Ω–∞–ª–∏–∑–∞ –º–µ—Ç—Ä–∏–∫ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º

üìå **–°—Ü–µ–Ω–∞—Ä–∏–π: –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞**

1. **–û–ø–æ–≤–µ—â–µ–Ω–∏–µ**:
   - Alert –æ—Ç Prometheus: "p95 latency of OrderService > 1.2s"

2. **–ü–µ—Ä–≤–∏—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤ Grafana**:
   - –°–º–æ—Ç—Ä–∏–º: RPS, –æ—à–∏–±–∫–∏ 5xx, —Ä–æ—Å—Ç –∑–∞–¥–µ—Ä–∂–µ–∫.
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ OrderService (CPU/Memory/–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–æ–≤).

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Kafka**:
   - –°–º–æ—Ç—Ä–∏–º –Ω–∞ –ª–∞–≥–∏ –≤ –æ—á–µ—Ä–µ–¥—è—Ö –∏ –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–±—ã—Ç–∏–π
   - –ï—Å—Ç—å –ª–∏ –Ω–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (dead-letter queue)?

4. **Redis**:
   - Cache miss rate –≤—ã—Ä–æ—Å? –ú–Ω–æ–≥–æ –ø—Ä–æ–º–∞—Ö–æ–≤ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î?

5. **PostgreSQL**:
   - –£–≤–µ–ª–∏—á–∏–ª–∞—Å—å –ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∞ (–≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤)?
   - –ï—Å—Ç—å –ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ –¥–æ–ª–≥–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏?
   - –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–¥–µ–∫—Å—ã ‚Äî –Ω–µ —É—à–ª–∏ –ª–∏ –∑–∞–ø—Ä–æ—Å—ã –≤ full scan.

6. **Jaeger (tracing)**:
   - –°—Ç—Ä–æ–∏–º —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É —Ü–µ–ø–æ—á–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã.
   - –ò—â–µ–º, –≥–¥–µ –∏–º–µ–Ω–Ω–æ –≤–æ–∑–Ω–∏–∫–ª–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ ‚Äî API Gateway? OrderService? –≤—ã–∑–æ–≤ Payment API?

7. **–†–µ—à–µ–Ω–∏—è:**
   - –ï—Å–ª–∏ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω —Å–µ—Ä–≤–∏—Å ‚Äî –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º.
   - –ï—Å–ª–∏ –∫—ç—à –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω ‚Äî –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º TTL –∏ –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≥—Ä–µ–≤–∞.
   - –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –≤ –ë–î ‚Äî –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –∏–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–º –∑–∞–ø—Ä–æ—Å—ã.
   - –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å Kafka ‚Äî –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–π –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.
