- **Синхронные вызовы**: только когда нужен немедленный ответ (карточка объявления, создание заказа, авторизация).
- **Асинхронные события**: всё что может подождать — через Kafka (сага «заказ-оплата-доставка» и т.п.).
- **Клиентские обновления в реальном времени**: WebSocket/WS-подписки из браузера/мобилки (статусы заказа, прогресс доставки, уведомления)
### Конкретные случаи использования
#### REST (HTTP/2)
Используется при взаимодействии:
- клиент <-> API Gateway (REST + JSON)
- API Gateway <-> ad-service / user-service / search-service: REST для CRUD/поиска (кешируемые GET, понятные URL)
- media-service: загрузка клиентом в объектное хранилище
- report-service: получение жалоб от пользователей в синхронном режиме, автоматическое отображение "ваша заявка в обработке"

Используем версию **HTTP/2**
- Даст мультиплексирование по одному TCP-соединению, компрессию заголовков (HPACK), приоритетизацию потоков — это ускорит поиск и снизит накладные расходы на установку соединений.

Собираем метрики: RPS, ошибки по кодам, латентности P50/P90/P99, retry rate, кэш-хиты.