## Сервис объявлений с доставкой и проведением оплаты
Схемы draw.io:
- [версия № 1](https://viewer.diagrams.net/?tags=%7B%7D&lightbox=1&target=blank&highlight=0000ff&edit=_blank&layers=1&nav=1&title=%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%20%D0%BE%D0%B1%D1%8A%D1%8F%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B9%20%D1%81%20%D0%B4%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%BE%D0%B9%20%D0%B8%20%D0%BE%D0%BF%D0%BB%D0%B0%D1%82%D0%BE%D0%B9&dark=auto#R%3Cmxfile%3E%3Cdiagram%20name%3D%22%D0%A1%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0%20%E2%80%94%201%22%20id%3D%22m1w7S_AMzuUM7NPfwQDJ%22%3E3V1bk6O2Ev41rsp5mCnul0dfN6nsZqfOViqPKdlobDJguQDPjPPrIwyShYQB74wE5sU2ciNk9e1Td0uemPP4%2FUsCDrtvKIDRxNCC94m5mBiGbhomfstbTkWL61lFwzYJg5Lo0vAj%2FBeWjVrZegwDmFYIM4SiLDxUGzdov4ebrNIGkgS9VcmeUVR96gFsodDwYwMisfWvMMh2RatnuJf2X2G43ZEn645ffBMDQlz%2BknQHAvTGNJnLiTlPEMqKT%2FH7HEb55JF5Ke5bXfmWDiyB%2B6zLDSt7ES%2B%2Bp86vp9W36eLFe1n8uXmwSm68guhY%2FuLfwfMLKIecncg8pG9hHIE9vpq97cIM%2FjiATf7VG2Y7bttlcYSvdPxRHFc51FeYZPCdaSrH%2BQWiGGbJCZOU39paOWel0Hi2XVy%2FXVjgeCXNjpl%2Bg9wISrZvad%2BXmcEfysm5ZaJsYaJAkD7CV%2FwrU3G2duCQf8SzAKIIRmibgBjPzQEmIR4PTPjvni5ftM3vc%2FgOiaLUz3czpztzQbcqTLA0gQe6UcMDRxoLfIEFKAlgMnIuOANjgy2ajAM4xTkHRs0I09UGxghRH7D3DfEvOo2aEbY1MEY4psCIPcrC53ADshDtHzcojsE%2BwOxwIjyWWRC%2B4o%2Fb%2FOMvk4U2ma3Or94Ez5tXvJrn1%2FNog4eJgcelnW1d%2BblUuPKKcP0hhclriNmDf33e4fT8ujy%2Fzs%2BvRfvi%2FGqdHzEjxMvyieV48GeNucVgOvTOtxSDpF%2FZpE%2FuiTPm2wX5mfjV%2Fx%2BZDTzlzISMU2SNqsRS8WREFoMehSJrCvMMA4x7y0uUZDu0RXsQLS%2BtswQd9wHMe9Xw1YXmK0KHcgL%2FgVl2KicUHDPUERmm6JhsYMNwCfIHyRY2cqagy39LI1sSGGHVfK1i%2FLpJLm99QiEe8sUVOFV%2BmgQdki6KgZZ3cayiw%2Fh57hFAfbE3002Gkqu6c4yjgsCc5TKL7VL0Faxh9ITSMLdQmGSNsgzFDME0Crf5FxnilAYdsyjcwzldcGmfA%2FoNzqybugj6TaX%2B9b50xOqoI44aHbF61hERpX5FIKhxwTOA17Ub7C66%2BaNkh%2BL1MVWyDjZNbg41USXqlsGeLJVw70slnI4q4alRCYeDAYbZTSWmSQJODNkhJ0ivP8d261Vv1ZGejOsiKcUIPlU%2F%2FXGKEolbSpclLkRmdpSlT4Mg%2Bkj5ZyjiH7%2BI7egeVdsCS4Ut0J2RCpMpRZhUy4CjqZABb6Qy4KsxKB7nEAzFeJumuUbGP9Kh9JgCh%2FVtT5JD4OTEspuNgWnqTfRyjIFhjVSYbEXGgI%2Bl%2BMNEF4bXTM%2F%2FDo5ekvCN1BMZqjwRxzTbHqbwEaW4Ru9fUSKpwlcykw3tPv2GG76ADIK3%2FGnTmhjWQ841TIHfojAOs3C%2FvRbOqr23miIqcj80F6VVMlKXFI7L0DtMBmt1%2B6PZTNWCPIimoJYkk4Rb5uQWi8la6cwtJpNR07rG9CrKKz%2BuZwmh7o4pTFdWYM%2B6M%2FTmdbR5liL0RsvabgztfVq0u5cV9OaYvJ7vzy8CkO7ohQLOyoFStzoh126MnbbS261Oy2qil%2BSEBiZNKZaGbJpXc%2BKGTQTSNNyQ5lUYqTMnzjCEzuGEQndbhIgTulvpDUOF0InlTAISKICHybzaDEShtSwWAxhWpHFVpaefdQZjuMztWrVmpQQ2IM7hwH6dHuohDTPMBdOZTWAOfaBGxlU8uYAw0%2FI5l7qa2vqZJpBVo7fnXH9V10CZ3d9gVYFsXQBJ%2B8dhEBRqDdPwX7A%2B95crdimbuHN7NrEX3atmiFEpK7XLLie0NqY7fHrQHnVsGCsiWl590I0%2FmNVeScKT9ICen1MoxYF7gvCD4FLPVSNmVJBYiTYYCdE%2FIGB5gdZ5paHN%2F%2F%2FnotqRqEfcEqAoERsk8Ha4mmajJqGutnbQvLNgA1mptLpKU1G0weV8oeo6E7uXlZMM5N2ZtZYc1t4c%2F%2FG5VbTTgmo4eqcNqhtWE72kNBjxhtwmB%2BoLauM%2FtwCZs%2FE2CJ6qlPJeq%2Fu95iNoPy5zy5T5zLbPyRPn5KE6E1LSqiEcBiZV7r0Lr1JXuajYq9xZQp1UXbR7FVeNV%2FG4bJzVMRv3aWbAEMzAMWWswBUToDGKalawIL%2BSqg3b0uDqjDElJqPwC4aGNRZFGNZiKGm0lmo7OzZfCCYvymcNVMPt%2BqRpjxp%2BZxlSUgrTruGKUqS%2BzgXiXDlZKo9HHSqKaYh4srGUcYqLPoyInOtVuezqKrg8sDCtAnaTzacDY7fTUkTDp5IdFUU0urgtkewb7BRY6r6SELEFJeNWBlycyL%2BOJzRmZyFtJ2uLGxYQpKthAgvXuOKFegMWuug6igoEJvg342fcL%2BbaYRL4hSTZDKsaY5UVVnFMIdvYdvAdbPPdapXNn2Ur3fZptDOufd%2FnzYzUdd7Pd%2BWkvM06vZToV9zDBzyC3xUADMIhWHzZvM8dxsLRG830khyCmGFj96k3eAUYgxB3v0pjPAerwzHdVQNHP7EH%2FIYcVt%2FlOU7v8Zx7g%2B%2F0qKbWmkQ5OyRaq6tdTW08hwrhRfVSCJLNrhGKUYe7FHzldMKHcOuiL52iPoPUQd5A2r1HXAwRTi8jkGbhpuBkAwc5XNulPMC7goZZbE2BFhuKl1tOQKDY5hSFWB4Ss10Y1oXkfF3TBrB52Z7l6XtxlEDZnpaAzJYjQW5XKy4NkBm9rNelF0%2BRTQ3txl5R8F7XuOW5oTh6b96bu%2B7KQVORu%2FavFKypYiBxImoZWAmmfdI6qjNryWliPS%2BkdI3bn%2Ba2hNZ0vfkGSXuExCiJeApXU3DNYFyzy%2BxsoIVblHLGrLMc4tzFzHjDrgjtyilegwR%2BPr%2BPtX%2Fg5wq8JhGxRib9DEvGEPmiO497A1pmL%2Bb7A0a6a7DLlBPtqjGqHIKyDLUO2Lo3BNWVg5YiBCVgYFuXk9%2FWNX5Hi4rNAoYYyoxhEII258uVLdNVcENtG7vZkV1cs504Vzrxq1EaNuvBrf2XA3XHusZlqOhW8v5KX8RY2g%2FzWvSFC4dwsRaD4diymtC8Jik0wEZjJz65cWwRFMELmJ7Ie1%2BpYxdjcE8ozbYJrDtclyDyv4P1%2BJjj82fK1oS3lJ4NaIpLogbekCPDR8kbjw9eOzU2U1PKHHEN08CcvNR0pJzhtMaqWas4ShkjApkGxhT%2FdzBKzgj7ePo%2B69QSYUYDZ0CQ%2Fr0Oxs8WvQb%2BKVUYS4QA88UfwhTjnsJDmq8K6WRH6Biowcw6Xy7eey2Q1cvJvTJKRa2uAW1JB%2B%2FdvEuNkwW35cgr%2Fnw2V8WRV1Yvu1Bl5Ds6i4ekc%2F0%2BKh6e1iweptdIL6nQvJdKQini0bmscBhHt%2FLHxbgte1xdp5Feknj0EqztVzyG4Vxc%2Fo%2Fy2rZAW430ksSjlz%2Bb6VU8JJ3z%2BVHr4bXsePf9RnpJ4tELNJUhHmRz0r1YD58rivWMG62HikyP3Qs0lbFy6S4ecv5DQrp48NbjRnqrBfryp55ZKqCvMxroa98ZthEy2IM0T04v2FeKeeosH8MwT4J8WC3oRrAfKtAN%2Bffe%2B5cPp%2FOW%2FGHYD4uvIdZa%2FAt%2FQ5u9sZrtkyR5ErOsxfaTxwTmuYR3Qdz6%2FQPVm4Pn%2FE6tuoSD4r%2F3HU3svPO2vIGcc2tw4Q27JXbO0ys5t5bk%2BhmN%2FIb2YYaS%2FBR%2Be1mTLHxK8qfu4BH%2Fdnx3fm7tlwQ8gz24NYF4XMNPzB0GIHn5jrsJs3wCtUfNrjYa59bPypJZ3Ak89C%2FsJGTJ8GWCUMZyHk%2FT7hsK8pNxl%2F8B%3C%2Fdiagram%3E%3C%2Fmxfile%3E)
- [версия №2](https://viewer.diagrams.net/?tags=%7B%7D&lightbox=1&target=blank&highlight=0000ff&edit=_blank&layers=1&nav=1&title=%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%20%D0%BE%D0%B1%D1%8A%D1%8F%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B9%20%D1%81%20%D0%B4%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%BE%D0%B9%20%D0%B8%20%D0%BE%D0%BF%D0%BB%D0%B0%D1%82%D0%BE%D0%B9&dark=auto#R%3Cmxfile%3E%3Cdiagram%20name%3D%22%D0%A1%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0%20%E2%80%94%201%22%20id%3D%22m1w7S_AMzuUM7NPfwQDJ%22%3E5V1Zc%2BOoFv41rup%2BSEpC%2B6PXnqnpnk5N7tS995FYxNZENi5JztK%2FftACRoAWJ1ri5KHdCgItfN9ZOBzQxJjvnr9F8LD9gX0UToDmP0%2BMxQQA4HmA%2FJeWvBQlpmXkJZso8PMy%2FVRwG%2FxCRaFWlB4DH8WlignGYRIcyoVrvN%2BjdVIqg1GEn8rV7nFYvusBbpBUcLuGoVz638BPtnmpC5xT%2BW8o2GzpnXXby8%2FsIK1cvEm8hT5%2B4oqM5cSYRxgn%2BdHueY7CtPdov%2BTtVhVn2YNFaJ%2B0abCyFrvFz9j%2B7WX1Y7p4cB8Wf6%2BvCjDi5IW%2BMPLJ%2Bxd%2F4ijZ4g3ew3B5Kp1F%2BLj3UXpVjfx1qvMd4wMp1EnhPyhJXgow4THBpGib7MLirPzkxcvE%2BBitUc3jUgbAaIOKplfrZXB3s7w5bJ1wvf9n%2Bv%2F%2F%2FUej9dJ34W5Q9Ms3hHcoiV5IhQiFMAkey1jDgjIbVo81vcEBeWSgFfx2CmgLchuWVb5C%2FpxFoxM05IB7ilNRBtgZ4BXP%2BwjDY%2FEG03WCIwlSwrxDenjchXkFY%2FaIoiQgLP8O71B4g%2BMgCfCeVLnDSYJ3XIVpGGzSE0mKLQ8iPiZhsEdzJndaHbLp5dBzLRbF2StD6FRQdOrTSfxolS0nebZWjV6p48%2FtZQoy180%2F8D4g%2FRjsNxNjOgF2SJ5h5geP5HCTHt5E6b236BhPUqEk3aIR%2FXgP95BWJk%2FC1a9EbH28SyXuaRsk6PYAM9l4Ipq2DMVdLpDf71gBXD9sMjH9maNUlPswevhJLhMkaedq15pVLgRZaa2ItgdSwFGn%2FcjhqAMFkG4HQCqVAhhP1wmKqFH51Sk1XvkpCWv2ouuYRaaW3BNw6k7Zqd9e%2B3jwKesZ%2FdgqXSvjZ2nt8JtGEXzhqh3SCvH591lV1L8yzNoG5CB%2FhG7ZJOn0xZ%2B3EsFO9NGbtXCFflSQpVJlms2mT6kyu7B9ym5ypG6S%2Bii1M4fKdy%2FccnhHq2vn9olkR1RmxFF0iicqqM48Ams8TcT3Wx1ijZ602dKY2EoN2L11Eb0%2BY1hX2vkAkNotIXWHgdTwBIcBtIP0XIMj2g9KnSqDI9bX3W7tjbLPvU%2FEL6qheyeYOPxuSbDOht%2F6ZwIVDAOqKQwzzJaGYGitYRn1bq3p1tbvR8vo9mdipNELIzsmUk9Au58JaG8Y1WMJ9gT0pHrEsLHpurWqRPSNhfr9MIzNWnwGhlGu9M0wKTbi9GTchPuYTr2xaqjfE8PMz8QwaxiG2YL7ZLjv030CVj0jLXHwaA3ByM9kVcFAVlVkpGW%2BT0aaYACGFeDwM7Y3v5OCbzBB8Cm9m2o68SpFgdQg%2F4XBLkjSeceKeURl2wmh5mye%2FZJjfeLmvy53bGS%2FIKvjZr8OV9%2Bm5eR4df6tp9nvMvtd0Bvlt2bls6xkTpuY9BQp1LkmRla%2BKp6t3WRqWUJbRfHbSmP72VBx%2BoyZ3KbYPnUWO49i0xE9R8ZjjKIr8u8xIL0jA8qBZmW%2FBscLXQJWyR2G8IwD3%2BB4t%2BDqrMo0IccmV5NRJq8vPJsnMXpR3OuCWGPaVllJeS1Z09uMkCWRJu3VaYayl6HpEb9OI6%2BlUfn35mVhZhoBUDHWvnBUsSr0hFYC%2FVQnJ5L3VUIwfgp2IUyTH2ZbHAW%2F8D6B4Tl4NszlVUMs48njpVmDzlaZEmLfMfQV4j2DpLfWKGorIFu8uzvGnQmHVdHplcIhDtc9ebbUVfR0F%2Fkl6ly69zxkpnOWTe4jdQsb%2FUdjqBw7U1CBQMCvI%2F%2FRFqMsYjplQ33bG2KE4knCvEN%2BAJuMtiXp0UVZ1zIjaVHby3uBuZXWpYvYFRfxThcpDng7bHKtliNa47MVjhjTN4a0xrVCyOcmBvvff6Ym9db4qqSDgOeUQ2PK%2BUwLrqZFHawqHjGHjLl6Hm14Xr7jSxgQnCOjw6THONecutUjMwyBGbalYIZuDWiM6OwIx4wDfNmR927SFToHvMMJrIw3o4Xspi3KY0jGLZtr7lV7%2Bkxj8ISbMnexPOBgQw02RBTeAlySkgFC5MscW8fQgSvHJBz53EBRGbN4FZWYxeBH%2BgKzAKdqasyXQD12zJfP6R3n53BKaHs5zDIdp2y%2BtAHTC%2BsykThmQb%2BdeuL1AvMtsrOAVyLMxGXBh2b6eBmZtflffy%2FKF1pJd9UkfXZRZBCzs3SVxRqUDEAOLfgoJAOH6KUdJwAHs8OFExktWM0Zp2FsShRZtGtCkYI6ml4eASwxr3ZIAqhzsuVIxQ2Ok02EYgXwX3YwTlD09V16mK%2BJHFm1cNniaFOhu7Uhox1AHnrECEbrba2wMlW6LCntXIZEF0AV7G0VZL4cKaTzmlJGwHjunhxi2OMkuA%2FWMF0jWIMu2sGAXH4V74i8rg7HeFv25ZhHzytVpm%2BVJvnS4NTF7EV7bDiBPA5chkRzButcWmukVBiQ8ZMofAhnysmwK7XibeWC%2FrKoPXPXX%2BGuncGNSw8v6K5ZopXTNvDUn%2FYHUidfYKy77YpK0E%2BqqZzpZ5Zxdluu0etqVRwYZTsAH8Zbtsgu%2FeMGJsSz22clQAMM%2BNplmG2ZoH7x1hsLdLK49uw1lV55DsTpOFeltk84y%2FEX8gOVLx6hTbp9ANDWMN6%2BS53cvUOuC%2BMny5V1sjekSjbl4dMf8P4Byj1%2FmhcfKxIl5F45Cq%2FXUnUeEBVid70nRx%2BgH1%2BjR1RIppK8pGtgGKIQbyKY7ppxQFFAngdF4rmb04mmTr8PnhHdCEcNQj387b2KsrEZPdBsyiOPLND8wVGw3xkMlqxHipmjjw2EAZx3BoQsDzQg%2BqGBEK2DO%2FYY2pbH0HxI5HqNdzu495VRSi48zEc7tPJgOhsQn4bCLMZcNf3F4s1vjK9oeeLcWQ7bRXMLlKnFeMRxCwzLLdnvyAMz1xFK%2FeLnD4qD2wzEsLMPhsLsbQ4Yh5UAxAk6CP2eFr25u7sfq4ipaqogs2rywOgtfCRvLJMvhGiYpHvNlFwFelv0DDfpnnclAItShiHoQmbO3jrNEWZ7rlqLR38Bv1GWlscJjJJpuo0nKViHMI6DNS1eBeHbN5Skk87NIcCCsf0vERU0I2i5gq%2BzpeWyQaKiySbvZmKCjKdzYsoC%2FFnCYEmmq9M2%2BBmDSxRZC7w7kbVkJMeQ4dcLJ81hbN4hoJ%2FVteeGaS1BdK%2FshkWu9fX7Cevqclg3FTtpBU9ah63gWZTks2R82UBCmAHk5%2FXfGIB80556VyalEfV%2BbFkwLZX3Y3axJEeNgTygzDBoVJKZXlXmW8qJc43rM8tZnG1bqZM8GpuplhY2NqpLPGhsrFwY0diqIkm6sV1VqlrDoJrwOilTHhYbLofoPj0j7sO8C3w%2F18soDn4V%2ByqmmrlQTuSq1mxiLdIrEVUcn4xcnET4Ac1xmG4AvdjjTP7uiRMlFLWSuRrVUj3mK8fX9LYBNlaxezmU12PXZZxFiEgZ3oe5JTmEBJePk37WAJ4hJioN6N2on1dOHpbSy0xuJJj7o7nZcipiYSwdZUrd1lcsSeXjbtkAFmjFPJy2TKO2s%2BN7iNv2QRHBBTYUhlZXrX3tLaYzjsPbYz6DrnCd1W%2Buya5zjQp8g6f8NoBG2RfzogACo2SciPnGXW%2BSWtsnnzbjpEHB6mbZg1LZ4L5ywGu4qUouva1KLv2yO4ZJcLUOjx8re%2F9M96n1aov%2BsJND8MXSYZXj%2B8mcXWHbFZWk9ZXbVfNNiPE38eijr8vRGcWgsK9NPNQ9LQdNL2gasLGvGzu7t3lA9fOOsu8%2B2vt0TqmIeZCSYjpJm5w569TNt2EUu%2Fa9o%2FxjcQLZMesD2w31%2B%2FEeDSBJrhSjXki7WCy5YfuCm9ZaKXSrtMcYPxvmcrGG1y9KS9mUfZNNHRRcE2Yh%2FvttrwgLVmqXNt9qqZHi6gi8dq05gutKP8Dz2tlSWgXf38eon%2B9NjfjJhm50iivrlJrsnaF1iiGOMLWGLWHFBl7HO%2BqrveRRvvXTZKA6ZAkdwrVcAzU0S3RhmwK3YUq1oX4%2Fu3KZ8nTefPGnTJwwDA5xiiYbIIX46Lf1vd%2BUniDIDtuEd7TkBHP80GwroXnbJnnmQAsHXac8YGXZKH1vktegs8X6Vscby6tV2ijbeA%2Bps52W9OvmU5Jn62zRUDeQRKrf8MVI26ytfy6pyJ%2Bnj3Dn1U%2FfMjeW%2FwI%3D%3C%2Fdiagram%3E%3C%2Fmxfile%3E) 31.07.2025
- [версия №3](https://viewer.diagrams.net/?tags=%7B%7D&lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%20%D0%BE%D0%B1%D1%8A%D1%8F%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B9%20%D1%81%20%D0%B4%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%BE%D0%B9%20%D0%B8%20%D0%BE%D0%BF%D0%BB%D0%B0%D1%82%D0%BE%D0%B9&dark=auto#R%3Cmxfile%3E%3Cdiagram%20name%3D%22%D0%A1%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0%20%E2%80%94%201%22%20id%3D%22m1w7S_AMzuUM7NPfwQDJ%22%3E7V1bc%2BLGEv41rto8mJJG90cM9iaVddYVn%2BTsPsogg7ICUUKs7fz6M5JmxFxaI2F0AXxSFS8MIwmmv%2B7p%2B1wZk9Xr58TfLO%2FjeRBdIW3%2BemVMrxBChuXgf7KRNzJi66gYWSThvBjT9wOP4b8BGdTI6C6cB1tuYhrHURpu%2BMFZvF4Hs5Qb85MkfuGnPccR%2F9SNvwikgceZH8mj%2Fw3n6bIYdZGzH%2F81CBdL%2BmTd9opPVj6dTH7JdunP4xdmyLi9MiZJHKfFq9XrJIiy1aPrUlx3V%2FFp%2BcWSYJ02ueDOmq6mX7f2r2939%2BPpD%2FfH9K%2FZtUG%2BW%2FpGf3Awx7%2BfvI2TdBkv4rUf3e5Hb5J4t54H2V01%2FG4%2F50scb%2FCgjgf%2FCdL0jRDT36UxHlqmq4h8Kn9z8mO28S6ZBYqvSxHgJ4uAXHo9uw2fHm4fNksnmq3%2FGX%2F%2F9h%2BNzst%2BC%2FMAsi6fg3gVpMkbnpAEkZ%2BGP3la%2BwQyi3JeeelDHOKvjDSCb4eQloDbsCz%2BDsX3JBftSTNOEv%2BNmbbJJmyrH3Ntws%2B5azgfGRwy8IviG9B3zJLsh3L0wEj683t8%2FetslX7%2F%2FZ%2FJt%2Bjv5%2BAxSK%2FN4pE%2F%2FWhHlvMK4%2BPGyf9q%2Bd%2B7K0x%2Bt3h9m7%2FGK168nZJp5O04%2F3uT%2F3Xzvxadhq9C5Nr9zNv8r5dfXnxUTCsfpDHTpuSGEPK%2F%2BE9YgnFo9aNwscavZxitQYIHfgZJGmIJMSYfrML5vGCMYBv%2B6z%2Fl98tYg9AV39y6ubKmJfKzGwSvkPgiF%2B%2BFBssk1QwsA5siQRvppmlzaCBPPBL6pgXdlF4fPz9vg1QA3aEwU0kABmbjWRonEjGxtN1kL3erqJiwp1tO44d4G6ZhnNHvKU7TeAUQNs3kGQuFeJdG4TqYlHuNppJmEpmryWQIDI7I6r7stxw6ZcnsNrZWTTZu4RWrDMpPNMS2ELyG6bfs8pFF3n3n3k1fyb3zN2%2FMm4cgCfEPz7hTTZL3bDDgPLOfDaZUg6gk9wSKV%2Bww7%2BA2eB%2FV%2Fg8EtaZh9KRq6BqPBEtrhoRDdQ3xOXW6RtX3qtRNDFN5QTfKySDyDARGLRpV%2BmytWGoFewdDRlCDdVsNAXE%2Bcmsgo1uq%2Bd0gxpD0jHBzzeiyJqNWWpwuO7azv16ua3p4n9A%2B5a8m%2BWe50uqNsy%2BfvZiyg7%2BAID1ljbSa1ypVHW20126oiLk6SiFtVecEuc%2BRsCBRaoGlxaaSv6vWsrmGiAQNkW7MjIKoGxqgIuq62ZWSaMnLAsE%2F44trwhsFF5TG396AQ6X99yn%2FzK4w%2BjSGBW%2FykQkzpzAYPZmRti%2FhKvLXGUss4yT8N16nfkR44mUZpsHjxs8F8EvibyApzhJViZF6ivZEMliqDaLPNdgIVQBjd0f4VzV2C5lD7I8O4ljXNg319iiwujC%2FI%2B%2BNbFdvFk%2BY8LNAtq3PclsyNJj2e0%2BJRp9B9YwT2pfAn6TDPqzz4WYFkzZQdm1rCG42XJ49HUNtIInzXV2t7TqWcn5H9hFVSPbsP0sCPw3w3Xabef7iEoSAXgGZvRBwPM3lNa3jpEBpw%2FBXdKes6rIj%2FiHepgu83FfIjvDq3MzDn%2FjlInv5aeVvMZ1%2BoR%2FhRzKfynoU8arO3qIQS5HEqNefngp58%2BWpHPBnPxa5FPpauFPJ%2BLYQOLrVXOmyKhBSSWBb2Fo92c%2BqQyqZ24JCBsowJNuZtxEmSTjbBn4yWwIkg0IpZZhkSo3TUnseM7q2K12FGH16KmnSFlHbyeQirFLc8I65%2FIZX1ssH3X0QVFlCMMR2AFihjmAF%2B%2B9lde7PYB5CEiAJFlkYBAtVf7v8IARDwh5rAXLA61MMmLLQ%2Ft1%2F%2FuFnZIl2mYTOLGNdadjWEGCL9amUKHWoy8U1BfvF9WRfhWsBq4tEl3Z7yyu7Kvz5dhT8DIiqB6IbL40fRUEULxI%2FCw9umOAC9xkTdaijwnP4GtAsF9i7oMZHYypQNYAQwQT8RZBEaiOiCP8CTyJBnGDRceFUsE%2BMDJYsaDb%2B2yqjwEUTwhRiDoBM6pkQMj%2FMgwgbGMnbRRPCFsJ%2Fpbo9GCVsWQVfx2n4jI3WLEFkNItXK389B60nKQVpIunTJtGnEZv3hCQlXmP06THRoUk2k8F8ZDH6PftEUAUnvvCDVLqzBhcSsIVkbKF%2BsSUrHoVdN0qCTHN%2BvVA6uPy25%2FbI43CWBuAU8dMkXoeVBMBK90ZY92yo1eVuR%2BEW4wWQ9Qk5NYwWVhv2Jsp7m8IFlQT%2B%2FDpeR4XrdhNhubs9MTt0jk3j3GW%2BJyPglWxG2WqmEaSXawB01DuySmE6utKKX2h8QQHj1jO5BB9kaQq3ncglKFqurg47St9L7yHsaMh%2Bqr9%2Fe5BRF0XhZpuhq%2BT4KN7Nmwbv2%2BdVg9%2FfLEve4Bxb5tQ24vqwNTEco76HL1UptfVhP1BAtM6mohvLaMinbSW6OxdAUrshSd1%2BSGp5PEklfmxJ9FpSvY465CvO1z1LQNRxohdcc%2B8D4YtqTZ0DTCwI6whgSMgpMD01wGrmdwMwXf9ICEP9IMwWCkLMjrTHY0UYDYlWzbdd5fyOEGl%2FJEQanSCyZSB1ROgBDdf%2BCe31I3ocsWyjI9FjihVIdg%2BIKYv0PwJiKO27Rowh1oY1rF48WMboA8gYZH4kxFj9IMYV1ZuOqhxFhRjZanXFES1Huwd1ZUj3a%2F8I62kXExFmiTGnE1GgTaNdhMEe7nMvIGgKOTgZvA2AHazdSD1j1LiQ5mt94GJA5%2BPwuED2EMCwK%2FzNlRa0en43WxJZQrb7ysNveOCznwb%2BS%2Fa0MRDhzao%2Fk7yGRIvCVZiG60VVgBe8ls%2BsKVJm8F%2BXeW0waTUu33iorCatSUqvfjSb4CMXo95yxahI4zN02G5EZS7PHa12bRTl5hmrnXLVw1Omhei0AVUgQzkdjlbNKMfVsp57dFrpSKytZR3GneMItfvU413pefaU8zty%2FyBJTO22QXKN%2F%2F8Z4tWHamrYZg74r8FIDB2qP5elSsn7N4xYMBiJNGXmyK3QTGZmKUyK%2BcJ38yRZNyXPOiN5YtsCMLSGNTPdZahLoPkS%2B3MALDd%2B5Bd10c2Wexmvnnbb4ZZa1%2FhsBQNYahdY6c6qXYbsQtCaoKYGa61l21eHKE%2BoQqMWZNuWrWsoLdXa%2BTbqw4JBl6gcNMacWdEWsjHEjssblDPqD%2BkFOpEy3V2qLwMkPbsa9AKaldL6WhsZFs1RPIneE0ooMjReBfPQr1OyLKnmYcqQmy1dKIuPWXuOLURmb2JX3MTb3wSxJRauVCd9e1bak5jQMbj2BGRy3ofr377ioU%2BPxi8gHOTCcqFqHTH0vGVAocBRqUCXqrlHLzyplPKukOEKkYoyJYnLIrd61PZ0eTcgJYd1skJnCO8wDCvTu4SF3CVsKm09Y956K6RElWXGVl6V42O6H8ntpjXe2SP8CnROQsYUodSjjIE9PgPm73To8dFkpa4bj89xbCy3CMoLuEsmBl2%2F7%2BJjufixqlKyquyxvI%2FA9%2BVrdnxCnzg5hKGFa8%2BHrXWBrU27oSe3M742B%2FEHcEVd2ZsHP8XmQmYfZOhze2B9ty%2FOf19ESuiSQtPlK0OVxnHz7ZZD3qol5zqBNNNDWAWgNCJYu%2FUdTZJy3SMTnNrkz7%2Bm%2FI3upKdqkuJyVoJHLL%2FQ7aGNFhrMAJowNMMEYsjsMBHAEhblzBtmN7MpUORtRBE91CqaBJwPAByxifHwAJCt1qI%2BX0n%2BkjlvOTFQUEVUYKC4TqN40vnQ1ZTaaQ2tURgXmcCiA%2B7fE9IXTDG17iRjw7Lfku32ouD7YOWH%2BPZ32xVeg7vNLuuWd2SDlnNjdPHsDhNyLvUrwAeM87QX1ml6vAfqpqZH1vwdbaQz%2Fxm8nu50E1i0hRQju6ZTsjS%2F5qgaW7NU8zsKRMoaRtbwBI8ULU%2FOLKKlYEJVRMu0Pb63Oj1f5SQCXPAeeiJHYx7V6wSSLMpGHANXCyKxYkilEsj1RoJCURbL0scX6yUJKqBwyRt5nmfqhuVYDt1j6HdyLUg4tt8WojppnQ%2B7xvMgqVNeJC%2Bq4GllTRrB6JwwukwZMB3GdGm%2FkQvdA8SzpTiNxu5To6EqFRtIjddhGidZ2jToZH9Ismcvg902oyXKeg1%2BTvxnf%2B0fGvTcPQUtxjvnfvLjK75NmGarq400ix9E%2BWinCqt0bFKPnbkVmTkceSfTP6DekpOsxdFzhNekaQ%2FHI9skdZF5KHoGmmaNd7f%2Bl2AwQAceKdHWeVWdkHtooW5MBF0Xdf4%2BjrZGctlLEmwwDA7ZcF3e9Nf4XrEW2XARm84kp5PrfDNZ1gvJnobG5koJUczSCcE6JLxz2rJd1xkJBwgCfV57dkPIRwQWhVE1EYD3%2BPsr9u5l8OovsvOsuZalZLTsWorq6dZX21IxGnBdpiUNtjmgQRJM8pMZsNiKX%2FId299uwxkdvgujrpxOVsM9hGK7%2BxOOxXhzd4ddw65hORpImbiUtTdiToinMwxdnp2TJyhy3F8dPWZF9cUwt5g7dgLMbcnkvQBVkLof6tsEddPC4%2BC%2BCAKTX9c4bWvmH63wwS2CZS9LxqDS0bbZnPJo26mkdLHH3LpMzJ8tXC7DxiLnNz7YRwYU%2FfaNufXaFFz8FuAGsaAe4nYbZ%2FbANICLSMa14jSXwKCfRM70qa0B51Mcm14F5xDUXgYVqdZepIpe1l4MlmzUXlWRvl17XVVuTY3VgUGcwuGQKHhOjwuGZPJ5u98Ot2kS%2FwgmcRRn%2B%2Bs6zvnvGetgwlBDIa4fzIlU2aL%2BqqYHBnV3ZDT12PS7S%2BJ1Td6%2BZdePLPr2O7ld%2Fmb6yr17I%2B%2FAPe4AStV3j2%2FaReTYJiLHCU%2FZY6E6BBQ4guFMTwQ9nOMMoe89dGhMz4c3DqKXKtKh9VzV4ZgSA4zlypFl1TBm%2Fo45PIXh1vaYk5KpljmpF7g9Zfg4issxnws%2BrvNwHtVNflsEjlvo7NhemGByswhybO8jObb34khg8CQoTw8aTEwCFaen2bDjHXsSb40BSmBX%2FTrglZY9Jyd7etY7FluwfXUoRtnr%2BVmy8gYcBoyOOQy4Yo0ar2%2B1%2FSJA1wBENYIOsdLFbtKtraYcmmHiKWypTVlSwwbL5Alj3mPL9yggbw3eWVw6KVgfkUFec03mWP%2ByzsfsmJQb0LtxHyZJnNz7P3J8oKON6zZyDY8yr2vgeYjVRf1cLq9GyC7pkqnbPrYJtq1lHxdxHeWHQ2aEFPemfiKwNVxuC0ze5%2FmO8EIO6Mpvx9mg2gjqO9ke2%2B6nIiJnCnqImE%2FZda7jgC3WO6QqFLJRWBk9GKWwjTxgAnSHq09N%2F9rV1%2Fvy4MFfEziofZGZhDNgVzj1qgEFvqr3am1keTbiBNBJVQ0o0XV6B1rWbOmGzdv3gHnf1YmW8NcdpIIzWM9pIg5RRfEIycHRro5I1TkmvKA8xXbogg0hicup6flQM7%2BbcL4hMyW2RAJ%2FlTciH0qW1nOso5awB8T3tZHmCD5UWklyErIU%2Fv3eECKgIYvXSYpGIgDcQoCmMHBu92lIACl%2BptVk9IgXeAfVeAko3icN1tR4tQZKSZTgm07%2FeGyngmOPXv097ufD0w0E2jV16ndmyMvV%2BWcvA5S2TNueAHcIEaDrB4qAugvq6jylq99Z52kLh%2Bt4oku%2FYweH3Izq%2Fv53GfHtO%2F1qYn0SeYAIlAeIhc4iIsOoAi3yr950V0eDdu7WZUT27pBWY9MTWNbRht6yhrFU34dN%2BFAnoBJEgY723cyaaBS2Jobx2ySOU3Y6BuXyPp5n9t3t%2FwA%3D%3C%2Fdiagram%3E%3C%2Fmxfile%3E) 02.08.2025
## **Этап 1. Требования к системе**
### 1.1. Функциональные требования
1. **Управление объявлениями**
    - Добавление, редактирование, удаление объявлений их создателем.
    - Личный кабинет пользователя с историей заказов.
    - Загрузка фото и видео.
2. **Отображение и поиск**
    - Список объявлений с фильтрацией по типам, пагинацией, поиском по ключевым словам.
    - Возможность сортировки и уточняющих фильтров.
3. **Регистрация и авторизация**
    - По email + пароль, подтверждение через почту.
4. **Процесс покупки**
    - Отправка заявки на покупку.
    - Подтверждение продавцом.
    - Создание заказа.
    - Трекинг статуса заказа: создан, собирается, в доставке, прибыл, получен.
    - Интеграция с API служб доставки (Почта РФ, СДЭК, Boxberry).
    - Отправка уведомлений (Email/SMS/push).
5. **Оплата**
    - Безопасная онлайн-оплата через сторонние сервисы.
    - Возврат средств в случае отмены заказа.
6. **Модерация контента**
    - **Премодерация**: новые аккаунты и объявления попадают в состояние «На модерации» — проверка автоматическая (запрещённые слова) и ручная.
    - **Постмодерация**: обработка жалоб.
7. **Дополнительно (опционально)**
    - Рейтинги продавцов и покупателей.
    - Отзывы в профиле.
### 1.2. Нефункциональные требования
#### Производительность
- <300 мс — поисковый запрос.
- <500 мс — оформление заказа.
- Пиковая нагрузка: **1000 RPS** (18–21:00 по локальному времени).
    - Поиск объявлений — 700 RPS.
    - Просмотр конкретных объявлений — 200 RPS.
    - Оформление заказа и авторизация — 100 RPS.
#### Масштабируемость
- Система должна выдерживать рост: больше каталогов, фильтров, регионов доставки, способов оплаты.
#### Отказоустойчивость
- Не падать при сбое стороннего API (retry, circuit breaker).
#### SLA/SLO/SLI
- SLA: 99.9% доступность.
- SLO: 95% заказов оформляются <1 сек.
- SLI: среднее время ответа, процент ошибок, доступность API.
#### Безопасность
- Шифрование персональных данных.
- Защита от атак и спама.
#### Наблюдаемость
- Централизованные логи (Loki, ELK).
- Метрики и мониторинг (Prometheus + Grafana).
#### Работа с данными
- Фиксация статусов операций.
- Реализация саги событий между микросервисами.
### 1.3. Архитектурный стиль и паттерны
**Выбор архитектуры:**  
Используем **микросервисы** с асинхронной коммуникацией через Kafka, так как:
- Проект рассчитан на масштабирование.
- Легче разносить сервисы по нодам и дублировать.
- Упрощается разделение зон ответственности между командами.
**Паттерны:**
1. **Event-driven архитектура** — минимизация зависимости сервисов друг от друга, меньше блокировок.
2. **Saga** — автономные сервисы связываются сценариями (хореография через события в Kafka).
    - Пример саги: «Создание заказа с оплатой и доставкой».
    - **Шаги**:
        1. Резервирование товара (ad-service).
        2. Создание заказа (order-service).
        3. Инициация платежа (payment-service).
        4. Заказ доставки (delivery-service).
    - **Компенсации**:
        - Если оплата не прошла → отмена заказа и снятие резерва товара.
        - Если доставка не подтверждена → возврат оплаты и отмена заказа.
	- Реализация: хореография событий в Kafka, каждый сервис подписан на события предыдущего шага и отвечает за компенсацию в случае сбоя.
	- Гарантия доставки событий — через Outbox + Kafka (непотеря данных даже при падении сервиса).
3. **CQRS** — только там, где это реально даёт прирост:
    - **Команды (Create/Update)**: Postgres → Kafka → асинхронное обновление ElasticSearch.
    - **Запросы (Query)**: ElasticSearch (поиск, фильтры), допускается некоторая задержка обновлений.
4. **Outbox** — гарантия доставки событий без потерь при распределённых транзакциях.
5. **Circuit Breaker + Retry** — для работы с внешними API (избегаем каскадных отказов).
## **Этап 2. Отказоустойчивость и производительность**
### 2.1. Масштабирование системы
- **Платформа**: Kubernetes для оркестрации и автоскейлинга.
- **Статус сервисов**: Stateless, балансировщики распределяют нагрузку.
- **Сервисы в k8s**:  
    ad-service, user-service, order-service, payment-service, search-service, API Gateway, search-indexer (Kafka consumer → Elastic), модерация, Prometheus, Grafana.
- **Вне k8s**: Postgres, Kafka, Redis, Elastic.
**Отдельные подходы:**
- **Elasticsearch**: горизонтальное масштабирование, индексы по регионам, автошардирование.
- **Redis**: кластеры в каждом регионе, масштабируем как кластер
- **Postgres**: read-реплики по регионам, шардирование по регионам (в бущущем возможно физическое), централизованная запись.
- **Kafka**: больше партиций при росте заказов, топики по доменам.

- Сервисы, которые могут масштабироваться в зависимости от нагрузки: 
	- search-service - обрабатывает основную нагрузку (поиск объявлений), масштабируется по CPU или latency в Prometheus, будут подниматься дополнительные реплики
	- ad-service - просмотр объявлений - масштабируется по количеству запросов (кэширует данные популярных объявлений)
	- user-service - масштабируется по числу обращений при росте активности пользователей (просмотр профиля, истории заказов -  и это тоже кэшируется)
	- search-indexer (и другие кафка консюмеры) - масштабируется при увеличении событий, каждая копия обрабатывает свою партицию
	- API Gateaway масштабируется по входящему траффику
#### Отказоустойчивость
- k8s следит за здоровьем сервисов (собирает liveness & readiness пробы)
- Kafka, Redis, Elasticsearch — развернуты с репликацией.
- Здоровье каждого API Gateway проверяется через health-check. Если сервис или ЦОД недоступен, GeoDNS перенаправляет трафик в другой ЦОД.
#### CAP теорема: выбираем между согласованностью и доступностью
- согласованность важна для операций оплаты и создания заказа - они будут идти через синхронную запись в мастер-реплику
- доступность достигается за счёт дублирования сервисов и реплик на чтение
	- при разделении сети будут доступны записи из кэша, а новые записи буферизируются в локальной outbox таблице
- **CP** для критичных операций (оплаты, создание заказа) и **AP** для сервисов поиска и отображения объявлений
#### Геораспределение
Для повышения отказоустойчивости и снижения задержек пользователей из разных регионов планируется геораспределённая архитектура:
- Используется два ЦОДа — в Москве (основной) и Новосибирске (резервный) с архитектурой типа **Active–Standin**:
	- В каждом регионе развёрнуты идентичные микросервисы, Redis, Elasticsearch и Kafka-кластер.
	- В Москве расположены мастер-реплики PostgreSQL и Kafka.
	- В Новосибирске доступны только операции чтения: поиск и просмотр объявлений.
- **PostgreSQL** работает в модели `global master + read replicas`, где
	- Основной мастер расположен в Московском ЦОД.
	- Все записи и большинство операций чтения направляются в Москву.
	- В Новосибирском ЦОД находятся только read-only реплики, синхронизированные с мастером через физическую репликацию.
	- Для обеспечения высокой доступности используется кластер Patroni, который отслеживает состояние мастер-нод и в случае отказа Московского мастера:
		- автоматизирует переключение одной из реплик в Новосибирске в режим `master`
		- обновляет параметры подключения в pgBouncer или сервисах
		- обеспечивает консистентную репликацию после восстановления
	- etcd хранилище используется для согласование лидера
- **Redis** используется локально в каждом регионе с fallback в базу данных при холодном кэше.
- **Kafka** кластер развёрнут на каждом ЦОД. Продюсеры и консюмеры региона работают со своим локальным кластером
	- **Kafka в Москве** считается основным источником данных. Пока 3 брокера с RF = 3
	- **Kafka в Новосибирске** — реплика для локального чтения и fallback при отказе.
	- Синхронизация через MirrorMaker (асинхронная репликация из топиков кластера в МСК в НСК кластер. Запись критичных событий (оплата, создания заказов) из НСК идёт сразу в кластер в Москве, а для событий с логами, метриками, notification запись в локальный НСК-кластер, а затем это реплицируется в главный кластер)
	- При недоступности Kafka-Москва — писать во временный локальный Kafka (НСК), с последующей репликацией в основной кластер.
	- Геораспределённый Kafka-кластер мы сознательно не используем, поскольку это создаёт риски split-brain, высокой latency и потери данных.
- **Внешний GeoDNS-сервис** (например, Cloudflare), который:
	- автоматически определяет геолокацию клиента по IP,
	- отдает IP ближайшего API Gateway (Москва или Новосибирск),
	- проверяет доступность ЦОДов через health-check
- **Elasticsearch** - в каждом регионе развёрнут свой кластер. Синхронизация через события в Kafka. В каждом регионе работает свой search-indexer (микросервис, читающий kafka-топики и обновляющий локальный elastic)
- При отказе основного региона автоматически включается резервный с синхронизированными данными (RPO < 5 мин).
#### Стратегии кэширования
Используется Redis в каждом ЦОДе (Москва и Новосибирск) — локально для сервисов этого региона. Это обеспечивает низкие задержки и независимость при отказе одной зоны.
- Будем кэшировать популярные объявления в Redis. Так как они часто запрашиваются - данные в search-service прогреваются при старте приложения, а так же используем read-through кэш. 
	- Данные карточек объявлений загружаются в кэш при первом обращении
	- Динамические данные кэшируются по событиям AdViewed, AdUpdated
- В сервисе по работе с данными профиля используем write-through, чтобы данные быстро подгружались после логина. Инвалидация кэша происходит по событию UserProfileUpdated
- При работе с внешними API сервисов доставки используем долгое время жизни кэша (TTL 15-30 минут) и обновляем при получении запроса от внешней службы, так как тяжело каждый раз ходить на внешние API
- При холодном старте или сбое Redis — система работает в fallback-режиме с прямым чтением из БД или ES.
- Статические данные (медиа) в CDN кэшируем, например, для превью объявлений
### Обеспечение высокой доступности
- Используем два географически разделённых ЦОДа с балансировкой на DNS-уровне (GeoDNS).
- Все микросервисы реплицированы и могут быть автоматически перезапущены (k8s, автоскейлинг). 
- Используются отказоустойчивые компоненты:
	- Kafka с несколькими брокерами и replication factor =3.
	- Кэширование в Redis в режиме кластера с Sentinel
	- PostgreSQL с репликацией и failover-механизмом.
	- CDN для раздачи медиа по ближайшим узлам.
#### Сценарии отказов и реакции системы
1. **Отказ одного микросервиса (например, ad-service)**:
   - Перезапуск контейнера через orchestrator (k8s).
   - Временно обработка осуществляется другими репликами.

2. **Отказ брокера Kafka**:
   - Kafka использует репликацию. Продюсеры и консьюмеры автоматически переключаются на активные брокеры.

3. **Потеря соединения между ЦОДами**:
   - ЦОД Новосибирск продолжает обслуживать только операции чтения из кэша/реплики.
   - Записи буферизуются через Outbox и доставляются в Kafka после восстановления канала.
   - DNS всё ещё направляет пользователей в ближайший регион (GeoDNS не изменяет поведение — доступ есть).

4. **Отказ PostgreSQL-мастера**:
   - Failover на реплику (manually или через pg_auto_failover).
   - Приложения автоматически меняют подключение через pgbouncer

5. **Недоступность Redis**:
   - Временное отключение кэширования, возврат к прямым запросам в БД.

6. **Полностью сломался один ЦОД** (например, Москва)
   - GeoDNS получит информацию об отказе (через healthcheck от внешнего мониторинга).
   - DNS автоматически начинает направлять пользователей в Новосибирский ЦОД.
   - Включается резервная копия PostgreSQL-мастера (если доступна) или пишем во временное хранилище (outbox).
   - Kafka MirrorMaker поднимается с другой стороны (если была двусторонняя репликация) — можно начать писать в локальный Kafka в НСК.
   - Media и CDN — уже кэшированы или обслуживаются глобально
####  Рекомендации по высокой доступности
- Хранить состояния микросервисов минимально (stateless, session через JWT).
- Использовать readiness/liveness пробы в k8s.
- Применять circuit breaker и retry для вызовов внешних API.
- Хранить критичные данные (оплаты, заказы) с подтверждённой записью.
- Внедрить централизованную систему логирования (ELK/Loki) и алертов (Prometheus + AlertManager).
### Оптимизация производительности
Узкие места и решения:
- запросы к Postgres при высоком объёме данных
	- индексация по регионам, времени создания
	- кэширование популярных объявлений (описано выше)
- поиск объявлений при большом количестве фильтров и сложных запросах
	- GiST- или GIN-индексы по полям `tags`, `categories`, `text` для полнотекстового поиска.
	- индексы на поля фильтрации и сортировки.
- генерация страниц каталога и ленты
	- используем пагинацию (keyset)
	- применяем batch-запросы
- задержки от внешних API
	- TTL-кэш внешних API (доставка, валюта, гео-инфо) — от 10 до 30 минут